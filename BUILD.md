################################################################################
# BUILD.md - æ„å»ºè¯´æ˜
################################################################################

# Event-Driven Template Project

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶é©±åŠ¨C++æ¨¡æ¿å·¥ç¨‹ï¼ŒåŒ…å«å…±äº«åº“å’Œå››ä¸ªç‹¬ç«‹åº”ç”¨ç¨‹åºã€‚

## é¡¹ç›®ç»“æ„

```
EventDrivenTemplate/
â”œâ”€â”€ CMakeLists.txt              # æ ¹CMakeé…ç½®
â”œâ”€â”€ BUILD.md                    # æ„å»ºè¯´æ˜
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ libs/                       # å…±äº«åº“
â”‚   â”œâ”€â”€ EventBus/              # äº‹ä»¶æ€»çº¿åº“
â”‚   â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â”‚   â”œâ”€â”€ include/
â”‚   â”‚   â”‚   â”œâ”€â”€ EventBus.h
â”‚   â”‚   â”‚   â”œâ”€â”€ TcpServer.h
â”‚   â”‚   â”‚   â””â”€â”€ TcpClient.h
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ EventBus.cpp
â”‚   â”‚   â”‚   â”œâ”€â”€ TcpServer.cpp
â”‚   â”‚   â”‚   â””â”€â”€ TcpClient.cpp
â”‚   â”‚   â””â”€â”€ proto/
â”‚   â”‚       â””â”€â”€ event_message.proto
â”‚   â””â”€â”€ AppTemplate/           # åº”ç”¨æ¨¡æ¿åº“
â”‚       â”œâ”€â”€ CMakeLists.txt
â”‚       â”œâ”€â”€ include/
â”‚       â”‚   â””â”€â”€ AppTemplate.h
â”‚       â””â”€â”€ src/
â”‚           â””â”€â”€ AppTemplate.cpp
â””â”€â”€ apps/                      # åº”ç”¨ç¨‹åº
    â”œâ”€â”€ VirtualSensor/         # è™šæ‹Ÿä¼ æ„Ÿå™¨
    â”‚   â”œâ”€â”€ CMakeLists.txt
    â”‚   â”œâ”€â”€ include/
    â”‚   â”‚   â””â”€â”€ VirtualSensor.h
    â”‚   â”œâ”€â”€ src/
    â”‚   â”‚   â”œâ”€â”€ main.cpp
    â”‚   â”‚   â””â”€â”€ VirtualSensor.cpp
    â”‚   â””â”€â”€ proto/
    â”‚       â””â”€â”€ sensor_data.proto
    â”œâ”€â”€ Algorithm/             # ç®—æ³•å¤„ç†å™¨
    â”‚   â”œâ”€â”€ CMakeLists.txt
    â”‚   â”œâ”€â”€ include/
    â”‚   â”‚   â””â”€â”€ Algorithm.h
    â”‚   â”œâ”€â”€ src/
    â”‚   â”‚   â”œâ”€â”€ main.cpp
    â”‚   â”‚   â””â”€â”€ Algorithm.cpp
    â”‚   â””â”€â”€ proto/
    â”‚       â””â”€â”€ algorithm_result.proto
    â”œâ”€â”€ GUI/                   # å‘½ä»¤è¡Œç•Œé¢
    â”‚   â”œâ”€â”€ CMakeLists.txt
    â”‚   â”œâ”€â”€ include/
    â”‚   â”‚   â””â”€â”€ GUI.h
    â”‚   â””â”€â”€ src/
    â”‚       â”œâ”€â”€ main.cpp
    â”‚       â””â”€â”€ GUI.cpp
    â””â”€â”€ WebApp/               # Webç•Œé¢
        â”œâ”€â”€ CMakeLists.txt
        â”œâ”€â”€ include/
        â”‚   â”œâ”€â”€ WebApp.h
        â”‚   â””â”€â”€ HttpServer.h
        â””â”€â”€ src/
            â”œâ”€â”€ main.cpp
            â”œâ”€â”€ WebApp.cpp
            â””â”€â”€ HttpServer.cpp
```

## ä¾èµ–è¦æ±‚

- CMake 3.16+
- C++17ç¼–è¯‘å™¨ (GCC 7+ æˆ– Clang 5+)
- Protocol Buffers (libprotobuf-dev)
- pthread

### Ubuntu/Debian å®‰è£…ä¾èµ–
```bash
sudo apt-get update
sudo apt-get install build-essential cmake libprotobuf-dev protobuf-compiler
```

### CentOS/RHEL å®‰è£…ä¾èµ–
```bash
sudo yum groupinstall "Development Tools"
sudo yum install cmake3 protobuf-devel protobuf-compiler
```

### macOS å®‰è£…ä¾èµ–
```bash
brew install cmake protobuf
```

## æ„å»ºæ­¥éª¤

1. å…‹éš†é¡¹ç›®å¹¶åˆ›å»ºæ„å»ºç›®å½•
```bash
git clone <repository-url>
cd EventDrivenTemplate
mkdir build && cd build
```

2. é…ç½®å’Œæ„å»º
```bash
cmake ..
make -j$(nproc)
```

3. æ„å»ºç»“æœ
æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶å°†è¾“å‡ºåˆ° `build/bin/` ç›®å½•ï¼š
- `VirtualSensor` - è™šæ‹Ÿä¼ æ„Ÿå™¨ç¨‹åº
- `Algorithm` - ç®—æ³•å¤„ç†ç¨‹åº  
- `GUI` - å‘½ä»¤è¡Œç•Œé¢ç¨‹åº
- `WebApp` - WebæœåŠ¡å™¨ç¨‹åº

å…±äº«åº“å°†è¾“å‡ºåˆ° `build/lib/` ç›®å½•ï¼š
- `libEventBus.so` - äº‹ä»¶æ€»çº¿åº“
- `libAppTemplate.so` - åº”ç”¨æ¨¡æ¿åº“

## è¿è¡Œåº”ç”¨

### æ–¹æ³•1: æŒ‰é¡ºåºå¯åŠ¨å„åº”ç”¨
```bash
cd build/bin

# ç»ˆç«¯1: å¯åŠ¨è™šæ‹Ÿä¼ æ„Ÿå™¨
./VirtualSensor

# ç»ˆç«¯2: å¯åŠ¨ç®—æ³•å¤„ç†å™¨
./Algorithm

# ç»ˆç«¯3: å¯åŠ¨GUIç•Œé¢
./GUI

# ç»ˆç«¯4: å¯åŠ¨Webåº”ç”¨
./WebApp
```

### æ–¹æ³•2: ä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
#!/bin/bash
# start_all.sh

cd build/bin

# åå°å¯åŠ¨å„åº”ç”¨
./VirtualSensor &
sleep 2
./Algorithm &
sleep 2
./WebApp &
sleep 2

# å‰å°è¿è¡ŒGUI
./GUI
```

## ä½¿ç”¨è¯´æ˜

### VirtualSensor (è™šæ‹Ÿä¼ æ„Ÿå™¨)
- ç«¯å£: 20001
- åŠŸèƒ½: æ¯2ç§’ç”Ÿæˆæ¨¡æ‹Ÿæ¸©åº¦ã€æ¹¿åº¦ã€æ°”å‹æ•°æ®å¹¶å¹¿æ’­

### Algorithm (ç®—æ³•å¤„ç†å™¨)  
- ç«¯å£: 20002
- åŠŸèƒ½: æ¥æ”¶ä¼ æ„Ÿå™¨æ•°æ®ï¼Œè®¡ç®—èˆ’é€‚åº¦æŒ‡æ•°ï¼Œç”Ÿæˆè­¦æŠ¥å’Œå»ºè®®

### GUI (å‘½ä»¤è¡Œç•Œé¢)
- ç«¯å£: 20003  
- åŠŸèƒ½: æ˜¾ç¤ºå®æ—¶ä¼ æ„Ÿå™¨æ•°æ®å’Œç®—æ³•ç»“æœ
- å‘½ä»¤: r(åˆ·æ–°), s(çŠ¶æ€), q(é€€å‡º)

### WebApp (Webç•Œé¢)
- ç«¯å£: 20004 (EventBus), 8080 (HTTP)
- åŠŸèƒ½: æä¾›Webç•Œé¢æ˜¾ç¤ºæ•°æ®
- è®¿é—®: http://localhost:8080

## äº‹ä»¶æœºåˆ¶

### EventBus åŠŸèƒ½
- `postEvent()`: æœ¬åœ°äº‹ä»¶åˆ†å‘
- `broadcast()`: è·¨è¿›ç¨‹äº‹ä»¶å¹¿æ’­  
- `registerHandler()`: æ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•°
- TCPè‡ªåŠ¨è¿æ¥å’Œé‡è¿

### äº‹ä»¶ç±»å‹
- `sensor.data`: ä¼ æ„Ÿå™¨æ•°æ®äº‹ä»¶
- `algorithm.result`: ç®—æ³•ç»“æœäº‹ä»¶

## ç‹¬ç«‹æ„å»º

æ¯ä¸ªåº“å’Œåº”ç”¨éƒ½å¯ä»¥ç‹¬ç«‹æ„å»ºï¼š

```bash
# ä»…æ„å»ºEventBusåº“
cmake --build . --target EventBus

# ä»…æ„å»ºVirtualSensoråº”ç”¨
cmake --build . --target VirtualSensor

# ä»…æ„å»ºç‰¹å®šç›®æ ‡
cmake --build . --target <target_name>
```

## æ•…éšœæ’é™¤

### ç«¯å£å†²çª
å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹å„åº”ç”¨çš„ç«¯å£é…ç½®ï¼š
- VirtualSensor: ä¿®æ”¹ `VirtualSensor.cpp` ä¸­çš„ç«¯å£å·
- Algorithm: ä¿®æ”¹ `Algorithm.cpp` ä¸­çš„ç«¯å£å·  
- GUI: ä¿®æ”¹ `GUI.cpp` ä¸­çš„ç«¯å£å·
- WebApp: ä¿®æ”¹ `WebApp.cpp` ä¸­çš„ç«¯å£å·

### Protobufé”™è¯¯
ç¡®ä¿å®‰è£…äº†æ­£ç¡®ç‰ˆæœ¬çš„protobufï¼š
```bash
protoc --version  # åº”è¯¥æ˜¾ç¤ºç‰ˆæœ¬å·
```

### æƒé™é—®é¢˜
å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œç¡®ä¿ç”¨æˆ·æœ‰æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x build/bin/*
```

################################################################################
# README.md - é¡¹ç›®è¯´æ˜
################################################################################

# Event-Driven Template Project

ä¸€ä¸ªåŸºäºäº‹ä»¶é©±åŠ¨æ¶æ„çš„C++æ¨¡æ¿å·¥ç¨‹ï¼Œå±•ç¤ºäº†å¦‚ä½•æ„å»ºå¯æ‰©å±•çš„å¤šè¿›ç¨‹åº”ç”¨ç³»ç»Ÿã€‚

## ç‰¹æ€§

- ğŸš€ **äº‹ä»¶é©±åŠ¨æ¶æ„**: åŸºäºEventBusçš„æœ¬åœ°å’Œè·¨è¿›ç¨‹äº‹ä»¶ç³»ç»Ÿ
- ğŸ”§ **æ¨¡å—åŒ–è®¾è®¡**: å…±äº«åº“å’Œç‹¬ç«‹åº”ç”¨ç¨‹åºåˆ†ç¦»
- ğŸŒ **å¤šç•Œé¢æ”¯æŒ**: å‘½ä»¤è¡ŒGUIå’ŒWebç•Œé¢
- ğŸ“¡ **å®æ—¶é€šä¿¡**: TCPè·¨è¿›ç¨‹é€šä¿¡ï¼Œæ”¯æŒè‡ªåŠ¨é‡è¿
- ğŸ—ï¸ **ç°ä»£C++**: C++17æ ‡å‡†ï¼ŒCMakeæ„å»ºç³»ç»Ÿ
- ğŸ“‹ **Protocol Buffers**: é«˜æ•ˆçš„åºåˆ—åŒ–åè®®

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VirtualSensor  â”‚â”€â”€â”€â–¶â”‚   Algorithm     â”‚â”€â”€â”€â–¶â”‚      GUI        â”‚
â”‚   (ç”Ÿæˆæ•°æ®)     â”‚    â”‚   (å¤„ç†æ•°æ®)     â”‚    â”‚   (æ˜¾ç¤ºæ•°æ®)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚            WebApp               â”‚
                 â”‚         (Webç•Œé¢)               â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç»„ä»¶

### å…±äº«åº“

#### EventBus
- TCPè·¨è¿›ç¨‹äº‹ä»¶å¹¿æ’­
- æœ¬åœ°äº‹ä»¶åˆ†å‘
- è‡ªåŠ¨è¿æ¥ç®¡ç†
- çº¿ç¨‹å®‰å…¨

#### AppTemplate  
- ç»Ÿä¸€çš„åº”ç”¨ç¨‹åºæ¥å£
- å°è£…EventBusåŠŸèƒ½
- æ ‡å‡†åŒ–çš„åº”ç”¨ç”Ÿå‘½å‘¨æœŸ

### åº”ç”¨ç¨‹åº

#### VirtualSensor
- ç”Ÿæˆæ¨¡æ‹Ÿä¼ æ„Ÿå™¨æ•°æ®(æ¸©åº¦ã€æ¹¿åº¦ã€æ°”å‹)
- å®šæ—¶å¹¿æ’­æ•°æ®äº‹ä»¶
- å¯é…ç½®çš„ä¼ æ„Ÿå™¨å‚æ•°

#### Algorithm
- æ¥æ”¶ä¼ æ„Ÿå™¨æ•°æ®
- è®¡ç®—ç¯å¢ƒèˆ’é€‚åº¦æŒ‡æ•°
- ç”Ÿæˆè­¦æŠ¥çº§åˆ«å’Œå»ºè®®

#### GUI
- å‘½ä»¤è¡Œç•Œé¢æ˜¾ç¤º
- å®æ—¶æ•°æ®æ›´æ–°
- äº¤äº’å¼å‘½ä»¤ç³»ç»Ÿ

#### WebApp
- HTTPæœåŠ¡å™¨
- å“åº”å¼Webç•Œé¢
- REST APIæ¥å£

## äº‹ä»¶æµç¨‹

1. **VirtualSensor** ç”Ÿæˆä¼ æ„Ÿå™¨æ•°æ® â†’ broadcast("sensor.data")
2. **Algorithm** æ¥æ”¶æ•°æ® â†’ å¤„ç†è®¡ç®— â†’ broadcast("algorithm.result")  
3. **GUI/WebApp** æ¥æ”¶ç»“æœ â†’ æ›´æ–°æ˜¾ç¤º

## å¿«é€Ÿå¼€å§‹

è¯¦ç»†æ„å»ºå’Œè¿è¡Œè¯´æ˜è¯·å‚è€ƒ [BUILD.md](BUILD.md)

```bash
# æ„å»ºé¡¹ç›®
mkdir build && cd build
cmake .. && make -j$(nproc)

# è¿è¡Œæ‰€æœ‰åº”ç”¨
cd bin
./VirtualSensor &
./Algorithm &  
./WebApp &
./GUI
```

è®¿é—®Webç•Œé¢: http://localhost:8080

## æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°åº”ç”¨
1. åœ¨ `apps/` ç›®å½•åˆ›å»ºæ–°çš„åº”ç”¨ç›®å½•
2. ç¼–å†™CMakeLists.txté…ç½®
3. ç»§æ‰¿AppTemplateç±»
4. å®ç°initialize(), run(), cleanup()æ–¹æ³•
5. æ³¨å†Œæ‰€éœ€çš„äº‹ä»¶å¤„ç†å™¨

### æ·»åŠ æ–°äº‹ä»¶ç±»å‹
1. å®šä¹‰æ–°çš„protobufæ¶ˆæ¯æ ¼å¼
2. åœ¨ç›¸åº”åº”ç”¨ä¸­æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
3. ä½¿ç”¨broadcast()å‘é€äº‹ä»¶

### è‡ªå®šä¹‰EventBus
EventBusæ”¯æŒçµæ´»é…ç½®ï¼š
- è‡ªå®šä¹‰ç«¯å£å·
- æ·»åŠ äº‹ä»¶è¿‡æ»¤å™¨
- å®ç°è‡ªå®šä¹‰åºåˆ—åŒ–åè®®

## æŠ€æœ¯ç»†èŠ‚

- **é€šä¿¡åè®®**: TCP + Protocol Buffers
- **å¹¶å‘æ¨¡å‹**: å¤šçº¿ç¨‹ + äº‹ä»¶é©±åŠ¨
- **é”™è¯¯å¤„ç†**: å¼‚å¸¸å®‰å…¨ + è‡ªåŠ¨é‡è¿
- **å†…å­˜ç®¡ç†**: RAII + æ™ºèƒ½æŒ‡é’ˆ

## License

MIT License - è¯¦è§LICENSEæ–‡ä»¶
